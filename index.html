<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฐููุฑููฐ โ ููุธู ุงูุนุจุงุฏุฉ ุงููููู</title>
    <link rel="stylesheet" href="styles.css?v=4">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#12b488">
    <link rel="icon" type="image/png" href="logo.png">
</head>

<body>
    <header>
        <div class="header-content">
            <a href="index.html" class="logo">๐ ุฐููุฑููฐ</a>
            <div class="header-right">
                <div class="points-badge" onclick="editUserName()" title="ุงุถุบุท ูุชุบููุฑ ุงุณูู">
                    <span class="user-name-display">ุฒุงุฆุฑ</span>
                    <span class="points-separator">|</span>
                    <span class="pts-val" id="totalPoints">0</span> ููุทุฉ
                </div>
                <div class="nav-menu">
                    <a href="index.html" class="nav-link active">ุงูุฑุฆูุณูุฉ</a>
                    <a href="quran.html" class="nav-link">ุงููุฑุขู</a>
                    <a href="dhikr.html" class="nav-link">ุงูุฃุฐูุงุฑ</a>
                    <a href="rosary.html" class="nav-link">ุงููุณุจุญุฉ</a>
                    <a href="about.html" class="nav-link">ููุญุฉ ุงูุตุฏุงุฑุฉ</a>
                </div>
                <button class="theme-toggle" id="darkModeToggle">๐ ุงููุถุน ุงููููู</button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Hero Section -->
        <div class="hero">
            <h1>๐ ุฐููุฑููฐ</h1>
            <p>ููุธู ุงูุนุจุงุฏุฉ ุงููููู - ุงุจุฏุฃ ุฑุญูุชู ุงูุฑูุญูุฉ</p>
            <div class="hero-buttons">
                <a href="quran.html" class="btn">๐ ุงูุฑุฃ ุงููุฑุขู</a>
                <a href="dhikr.html" class="btn btn-secondary">๐ฟ ุงูุฃุฐูุงุฑ</a>
            </div>

            <div class="global-counter-box">
                <div class="global-counter-title">๐ ุนุฏุงุฏ ุงูุงุณุชุบูุงุฑ ุงูุนุงููู</div>
                <div class="global-counter-value" id="globalIstighfarCounter">...</div>
                <button class="btn btn-counter" style="margin-top: 10px; width: 100%; border-radius: 50px;"
                    id="globalIstighfarBtn">ุฃุณุชุบูุฑ ุงููู ุงูุนุธูู</button>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- ุงูุตููุงุช -->
            <div class="card">
                <div class="card-title">๐ ุงูุตููุงุช ุงูููููุฉ</div>
                <div class="prayer-list" id="prayersList"></div>
                <div class="prayers-summary">
                    ุงูููุชููุฉ: <span id="prayersCount">0</span> / 5
                </div>
            </div>

            <!-- ุฎุชูุฉ ุงููุฑุขู (ุงูุฑุญูุฉ ุงูุจุตุฑูุฉ) -->
            <div class="card">
                <div class="card-title" style="justify-content: space-between;">
                    <span>๐ ุฑุญูุฉ ุฎุชูุฉ ุงููุฑุขู</span>
                    <span id="khatmahCountBadge"
                        style="font-size: 0.9rem; background: var(--primary); color: white; padding: 0.2rem 0.8rem; border-radius: 50px; display: none;">0
                        ุฎุชูุงุช</span>
                </div>

                <!-- Visual Map -->
                <div class="quran-journey-map" id="quranJourneyMap">
                    <!-- ุณูุชู ุฅุถุงูุฉ ุงูููุงุท (Nodes) ููุง ุนุจุฑ JavaScript -->
                </div>

                <div class="quran-journey-controls">
                    <div class="quran-input-wrapper"
                        style="margin-bottom: 0; flex: 1; display: flex; align-items: center; justify-content: center; gap: 1rem;">
                        <input type="number" id="quranParts" class="quran-input" min="0" max="30"
                            placeholder="ุนุฏุฏ ุงูุฃุฌุฒุงุก (0-30)" style="max-width: 150px; text-align: center;">
                        <button class="btn" onclick="updateQuranProgress()">ุชุญุฏูุซ ุงูุฅูุฌุงุฒ</button>
                    </div>
                </div>

                <div class="progress-wrapper">
                    <div class="progress-bar-bg">
                        <div class="progress-bar" id="quranProgressBar" style="width: 0%">0%</div>
                    </div>
                    <div class="progress-text" id="quranProgressText">0 ุฌุฒุก ูู 30</div>
                </div>

                <div id="khatmahCompleteMsg"
                    style="display: none; margin-top: 1.5rem; text-align: center; background: rgba(16, 185, 129, 0.1); padding: 1rem; border-radius: 12px; border: 1px dashed var(--primary);">
                    <div style="font-size: 1.2rem; margin-bottom: 0.5rem;">๐ ูุจุงุฑู ูู ุฅุชูุงู ุงูุฎุชูุฉ!</div>
                    <div style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">ููุฏ ุญุตูุช ุนูู 500 ููุทุฉ
                        ูุฌุงุฆุฒุฉ ูุจุฑู.</div>
                    <button class="btn" onclick="startNewKhatmah()" style="width: 100%;">ุงูุจุฏุก ุจุฎุชูุฉ ุฌุฏูุฏุฉ</button>
                </div>
            </div>
            <!-- ุชุญุฏู ุงูุฃุณุจูุน -->
            <div class="card weekly-challenge-card" style="z-index: 10;">
                <div class="card-title" style="position: relative; z-index: 2;">๐ ุชุญุฏู ุงูุฃุณุจูุน</div>
                <div class="challenge-content" style="position: relative; z-index: 2;">
                    <div class="challenge-icon">๐ฏ</div>
                    <div class="challenge-details">
                        <h3 id="weeklyChallengeTitle">ุงูุจุญุซ ุนู ุชุญุฏู...</h3>
                        <p id="weeklyChallengeDesc">ุงูุฑุฌุงุก ุงูุงูุชุธุงุฑ</p>
                    </div>
                </div>
                <div class="progress-wrapper" style="position: relative; z-index: 2;">
                    <div class="progress-bar-bg">
                        <div class="progress-bar" id="challengeProgressBar" style="width: 0%">0%</div>
                    </div>
                    <div class="progress-text" id="challengeProgressText">0 / 0</div>
                </div>
                <button class="btn btn-secondary" id="challengeActionBtn"
                    style="width: 100%; margin-top: 1rem; position: relative; z-index: 2;"
                    onclick="location.href='dhikr.html'">ุงุจุฏุฃ ุงูุชุญุฏู ุงูุขู</button>
            </div>

            <!-- ุณููุฉ ุงูููู -->
            <div class="card sunnah-card"
                style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), rgba(5, 150, 105, 0.05)); border: 2px solid rgba(16, 185, 129, 0.2);">
                <div class="card-title">โจ ุณููุฉ ุงูููู</div>
                <div class="sunnah-content" style="text-align: center; margin: 1.5rem 0;">
                    <h3 id="dailySunnahTitle" style="color: var(--primary); font-size: 1.3rem; margin-bottom: 0.5rem;">
                        ุณูู ุชุฑูุน ุฏุฑุฌุงุชู</h3>
                    <p id="dailySunnahDesc" style="color: var(--text-muted); font-size: 0.95rem; line-height: 1.5;">...
                    </p>
                </div>
                <button class="btn btn-secondary" id="sunnahDoneBtn" style="width: 100%;"
                    onclick="completeSunnah()">ุฃุชููุช ุงูุณููุฉ (+10 ููุทุฉ)</button>
            </div>

            <!-- ุงุณู ุงููู ุงูููู -->
            <div class="card asma-card"
                style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(37, 99, 235, 0.05)); border: 2px solid rgba(59, 130, 246, 0.2); text-align: center;">
                <div class="card-title">๐ฟ ุงุณู ุงููู ุงูููู</div>
                <div class="asma-content" style="margin-top: 2rem;">
                    <div class="asma-name" id="dailyAsmaName"
                        style="font-size: 3rem; font-family: 'Amiri', serif; color: #2563eb; font-weight: 900; margin-bottom: 0.5rem;">
                        ุงููู</div>
                    <div class="asma-meaning" id="dailyAsmaMeaning"
                        style="color: var(--text-muted); font-size: 1.1rem;">ุงููุฃููู ุงููุนุจูุฏ ุงููุณุชุญู ูุฅูุฑุงุฏู ุจุงูุนุจุงุฏุฉ
                    </div>
                </div>
            </div>

            <!-- ุงุฎุชุจุฑ ูุนูููุงุชู (ุงูุณุคุงู ุงููููู) -->
            <div class="card quiz-card"
                style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.05), rgba(217, 119, 6, 0.05)); border: 2px solid rgba(245, 158, 11, 0.2);">
                <div class="card-title">๐ค ุงุฎุชุจุฑ ูุนูููุงุชู</div>
                <div class="quiz-content" style="margin-top: 1rem;">
                    <p id="quizQuestion"
                        style="font-size: 1.1rem; font-weight: bold; margin-bottom: 1rem; color: var(--text-color);">
                        ุฌุงุฑู ุชุญููู ุงูุณุคุงู...</p>
                    <div id="quizOptions" style="display: flex; flex-direction: column; gap: 0.5rem;">
                        <!-- Options will be injected via JS -->
                    </div>
                    <div id="quizResult"
                        style="margin-top: 1rem; font-weight: bold; font-size: 0.95rem; display: none; padding: 0.75rem; border-radius: 8px;">
                    </div>
                </div>
            </div>

            <!-- ููุฎุต ุงูููู ูุงูุชุญููุฒ -->
            <div class="card">
                <div class="card-title">โญ ููุฎุต ุฅูุฌุงุฒู ุงูููู</div>
                <div class="summary-body">
                    <div class="summary-row">
                        <span>ุณูุณูุฉ ุงูุฃูุงู ุงููุชุชุงููุฉ</span>
                        <span class="summary-value" id="streakDays">0 ููู</span>
                    </div>
                    <div class="summary-row">
                        <span>ูุณุจุฉ ุฎุชูุฉ ุงููุฑุขู</span>
                        <span class="summary-value" id="summaryQuranPercent">0%</span>
                    </div>
                    <div class="summary-row">
                        <span>ุงูุตููุงุช ุงูููุชููุฉ ุงูููู</span>
                        <span class="summary-value" id="summaryPrayersDone">0 / 5</span>
                    </div>
                </div>
                <div class="summary-goal">
                    ูุฏู ุงูููู: ุตููู ุงูุตููุงุช ุงูุฎูุณ ูุญุงูู ูุฑุงุกุฉ ุฌุฒุก ูุงุญุฏ ุนูู ุงูุฃูู ๐
                </div>
                <div class="summary-message" id="motivationMessage"></div>
            </div>

        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script src="script.js?v=10"></script>
    <script type="module" src="firebase.js"></script>
</body>

</html>