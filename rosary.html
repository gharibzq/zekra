<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ø³Ø¨Ø­Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© - Ø°ÙÙƒØ±Ù‰Ù°</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .rosary-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            padding: 2rem;
            text-align: center;
        }

        .rosary-title {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 2rem;
            font-weight: 800;
        }

        body.dark-mode .rosary-title {
            color: var(--primary-light);
        }

        .rosary-counter {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary);
            background: var(--card-light);
            width: 200px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            box-shadow: 0 10px 30px rgba(5, 150, 105, 0.2);
            border: 10px solid rgba(5, 150, 105, 0.1);
            margin-bottom: 3rem;
            transition: all 0.2s ease;
            cursor: pointer;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body.dark-mode .rosary-counter {
            background: var(--card-dark);
            color: var(--primary-light);
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.2);
            border-color: rgba(16, 185, 129, 0.1);
        }

        .rosary-counter:active {
            transform: scale(0.95);
            box-shadow: 0 5px 15px rgba(5, 150, 105, 0.3);
        }

        .rosary-controls {
            display: flex;
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .btn-reset-rosary {
            padding: 1rem 2rem;
            font-size: 1.2rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
            transition: all 0.3s ease;
        }

        .btn-reset-rosary:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .vibration-toggle {
            padding: 1rem 2rem;
            font-size: 1.2rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .vibration-toggle:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .vibration-toggle.disabled {
            background: var(--text-muted);
        }

        .rosary-text {
            font-size: 1.5rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        body.dark-mode .rosary-text {
            color: var(--text-dark);
        }
    </style>
</head>

<body>
    <header>
        <div class="header-content">
            <a href="index.html" class="logo">ğŸ•Œ Ø°ÙÙƒØ±Ù‰Ù°</a>
            <div class="header-right">
                <div class="points-badge" onclick="editUserName()" title="Ø§Ø¶ØºØ· Ù„ØªØºÙŠÙŠØ± Ø§Ø³Ù…Ùƒ">
                    <span class="user-name-display">Ø²Ø§Ø¦Ø±</span>
                    <span class="points-separator">|</span>
                    <span class="pts-val" id="totalPoints">0</span> Ù†Ù‚Ø·Ø©
                </div>
                <div class="nav-menu">
                    <a href="index.html" class="nav-link">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                    <a href="quran.html" class="nav-link">Ø§Ù„Ù‚Ø±Ø¢Ù†</a>
                    <a href="dhikr.html" class="nav-link">Ø§Ù„Ø£Ø°ÙƒØ§Ø±</a>
                    <a href="rosary.html" class="nav-link active">Ø§Ù„Ù…Ø³Ø¨Ø­Ø©</a>
                    <a href="about.html" class="nav-link">Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø©</a>
                </div>
                <button class="theme-toggle" id="darkModeToggle">ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</button>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="rosary-container card">
            <h1 class="rosary-title">Ø§Ù„Ù…Ø³Ø¨Ø­Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</h1>
            <div class="rosary-text" id="rosaryText">Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡ÙØŒ ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡ÙØŒ ÙˆÙÙ„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§
                Ø§Ù„Ù„ÙÙ‘Ù‡ÙØŒ ÙˆÙØ§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù</div>

            <div class="rosary-counter" id="rosaryCounter">0</div>

            <div class="rosary-controls">
                <button class="btn-reset-rosary" id="resetRosary">ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯ ğŸ”„</button>
                <button class="vibration-toggle" id="vibrationToggle">Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²: Ù…ÙØ¹Ù„ ğŸ“³</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const counterElement = document.getElementById('rosaryCounter');
            const resetButton = document.getElementById('resetRosary');
            const vibrationButton = document.getElementById('vibrationToggle');

            let count = parseInt(localStorage.getItem('rosaryCount')) || 0;
            let vibrationEnabled = localStorage.getItem('rosaryVibration') !== 'false'; // Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ Ù…ÙØ¹Ù„

            // ØªÙ‡ÙŠØ¦Ø© ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            counterElement.textContent = count;
            updateVibrationButton();

            // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ù„Ù„Ø³Ø¨Ø­Ø©
            counterElement.addEventListener('click', () => {
                count++;
                counterElement.textContent = count;
                localStorage.setItem('rosaryCount', count);

                // Ø¥Ø¶Ø§ÙØ© Ù†Ù‚Ø§Ø· ÙƒÙ„ Ù…Ø§Ø¦Ø© ØªØ³Ø¨ÙŠØ­Ø©
                if (count > 0 && count % 100 === 0) {
                    addPoints(50, `Ø¥ØªÙ…Ø§Ù… 100 ØªØ³Ø¨ÙŠØ­Ø© (+50 Ù†Ù‚Ø·Ø©)`);
                }

                // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø² Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ù…ÙˆØ­Ø§Ù‹ ÙˆØ®Ø§ØµÙŠØ© Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø² Ù…Ø¯Ø¹ÙˆÙ…Ø© ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­/Ø§Ù„Ø¬Ù‡Ø§Ø²
                if (vibrationEnabled && navigator.vibrate) {
                    navigator.vibrate(30); // Ø§Ù‡ØªØ²Ø§Ø² Ø®ÙÙŠÙ Ø¬Ø¯Ø§ Ù„Ù…Ø¯Ø© 30 Ù…Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©
                }
            });

            // ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯
            resetButton.addEventListener('click', () => {
                count = 0;
                counterElement.textContent = count;
                localStorage.setItem('rosaryCount', count);

                if (vibrationEnabled && navigator.vibrate) {
                    navigator.vibrate([50, 50, 50]); // Ø§Ù‡ØªØ²Ø§Ø² Ù…Ù…ÙŠØ² Ù„Ù„ØªØµÙÙŠØ±
                }
            });

            // ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²
            vibrationButton.addEventListener('click', () => {
                vibrationEnabled = !vibrationEnabled;
                localStorage.setItem('rosaryVibration', vibrationEnabled);
                updateVibrationButton();
            });

            function updateVibrationButton() {
                if (vibrationEnabled) {
                    vibrationButton.textContent = 'Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²: Ù…ÙØ¹Ù„ ğŸ“³';
                    vibrationButton.classList.remove('disabled');
                } else {
                    vibrationButton.textContent = 'Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²: Ù…Ø¹Ø·Ù„ ğŸ“´';
                    vibrationButton.classList.add('disabled');
                }
            }
        });
    </script>
    <script type="module" src="firebase.js"></script>
</body>

</html>